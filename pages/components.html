<!DOCTYPE html><html><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>VueDart: Components</title>
  <link rel="icon" href="favicon.ico">

  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700,400italic">
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

  <script src="../dist/vendor.js"></script>

  <script defer="" src="docs.initialize.dart.js"></script>
  

  <style>
    #content { padding: 0em 1em; }
    .md-layout { flex-wrap: nowrap !important; }
    .highlight .err { border: 0px !important; }
    pre { overflow-x: auto; }
    [v-cloak] { display: none; }
    a:visited:not(.md-button) { color: blue; }
  </style>
</head>

<body>
  <div id="app" v-cloak="">
    <site-navbar nested=""></site-navbar>

    <md-layout md-row="" md-column-small="">
      <docs-navlist></docs-navlist>

      <div id="content" v-pre="">
        <h1>Components</h1><div id="component"></div>
<h2>Defining a component</h2>
<p>Unfortunately, as awesome as our example app is, it's kinda messy. You probably don't want
this much stuff in one place. Therefore, we're going to move out displaying the name into
its own component, <code>show-name</code>.</p>
<p>Toss this in <code>lib/show_name.dart</code>:</p>
<div class="highlight"><pre><span></span><span class="k">import</span> <span class="s1">'package:vue2/vue.dart'</span><span class="p">;</span>


<span class="nd">@VueComponent</span><span class="p">(</span><span class="nl">name:</span> <span class="s1">'show-name'</span><span class="p">,</span> <span class="nl">template:</span> <span class="s1">'&lt;p&gt;Your name is: Bob&lt;/p&gt;'</span><span class="p">)</span>
<span class="kd">class</span> <span class="nc">ShowName</span> <span class="kd">extends</span> <span class="n">VueComponentBase</span> <span class="p">{</span>
  <span class="n">ShowName</span><span class="p">(</span><span class="n">context</span><span class="p">)</span><span class="o">:</span> <span class="k">super</span><span class="p">(</span><span class="n">context</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>

<p>Also, add the following import to <code>index.dart</code>:</p>
<div class="highlight"><pre><span></span><span class="k">import</span> <span class="s1">'package:vuedart_example/show_name.dart'</span><span class="p">;</span> <span class="c1">// &lt;-- Component import goes here</span>
</pre></div>

<p>and change <code>index.html</code> like so:</p>
<div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">body</span> <span class="na">vuedart</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">"app"</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">v-model</span><span class="o">=</span><span class="s">"name"</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">show-name</span><span class="p">&gt;&lt;/</span><span class="nt">show-name</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
</pre></div>

<p>Now refresh your browser page. You should see it now say, <em>Your name is Bob</em>.</p>
<p>But let's take a few steps back. What exactly is going on here?</p><ul><li>
<p>New components are defined using the <em>VueComponent</em> annotation and the <em>VueComponentBase</em>
  base class. You pass your template through the <em>template:</em> argument on the annotation
  (there's a better way, but we'll get to that later).</p></li><li>
<p>As before, it's important to declare your constructor, except now it's taking a single
  argument, though it's still just passing it up a level.</p></li></ul>
<p>That being said, putting templates in the annotation string is just nasty. In vanilla Vue,
you can use webpack for stuff like this. Does VueDart have an alternative? <em>Yup!</em></p>
<p>Change the <em>VueComponent</em> annotation in <code>show_name.dart</code> to read:</p>
<div class="highlight"><pre><span></span><span class="nd">@VueComponent</span><span class="p">(</span><span class="s1">'show-name'</span><span class="p">,</span> <span class="nl">template:</span> <span class="s1">'&lt;&lt;show_name.html'</span><span class="p">)</span>
</pre></div>

<p>and create <code>lib/show_name.html</code> containing the following:</p>
<div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">template</span> <span class="na">vuedart</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Your name is: Bob<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</pre></div>

<p>The <code>&lt;&lt;show_name.html</code> syntax means <em>read show_name.html and use the template inside here</em>.
VueDart will read the file, extract the contents of the template element, and use that
for your template. However, this gets even better! Since your template is almost always
the same name as your Dart code (e.g. <code>show_name.dart</code> and <code>show_name.html</code>), VueDart
uses that as the default. Therefore, you can abbreviate all this to:</p>
<div class="highlight"><pre><span></span><span class="nd">@VueComponent</span><span class="p">(</span><span class="s1">'show-name'</span><span class="p">,</span> <span class="nl">template:</span> <span class="s1">'&lt;&lt;'</span><span class="p">)</span>
</pre></div>

<p>and VueDart will automatically use the template in <code>show_name.html</code>.</p><div id="props"></div>
<h2>Declaring properties</h2>
<p>Well, this component is a bit of a downgrade. Before, we could display <em>any</em> name; now
we're limited to Bob's. Let's try using some properties:</p>
<div class="highlight"><pre><span></span><span class="nd">@VueComponent</span><span class="p">(</span><span class="nl">name:</span> <span class="s1">'show-name'</span><span class="p">,</span> <span class="nl">template:</span> <span class="s1">'&lt;&lt;'</span><span class="p">)</span>
<span class="kd">class</span> <span class="nc">ShowName</span> <span class="kd">extends</span> <span class="n">VueComponentBase</span> <span class="p">{</span>
  <span class="n">ShowName</span><span class="p">(</span><span class="n">context</span><span class="p">)</span><span class="o">:</span> <span class="k">super</span><span class="p">(</span><span class="n">context</span><span class="p">);</span>

  <span class="nd">@prop</span>
  <span class="kt">String</span> <span class="n">name</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">template</span> <span class="na">vuedart</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Your name is: {{name}}<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</pre></div>

<p>Props in VueDart are declared via the <em>prop</em> annotation, and the syntax is just like normal
Dart. You can also give a default value by doing <code>String name = "default name"</code>.</p>
<p>Now modify <code>index.html</code>:</p>
<div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">body</span> <span class="na">vuedart</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">"app"</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">v-model</span><span class="o">=</span><span class="s">"name"</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">show-name</span> <span class="na">:name</span><span class="o">=</span><span class="s">"name"</span><span class="p">&gt;&lt;/</span><span class="nt">show-name</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
</pre></div>

<p>Voila! We're back to the same code, but now it's better organized. Yaaay!!</p>
<p>(Yes, I left out the capitalization; that's an exercise for the reader!)</p><div id="scoped"></div>
<h2>Scoped styles</h2>
<p>VueDart also supports scoped styles via
<a href="https://pub.dartlang.org/packages/scopify">scopify</a>. Here's how they work:</p>
<div class="highlight"><pre><span></span><span class="nd">@VueComponent</span><span class="p">(</span><span class="nl">name:</span> <span class="s1">'show-name'</span><span class="p">,</span> <span class="nl">template:</span> <span class="s1">'&lt;&lt;'</span><span class="p">)</span>
<span class="kd">class</span> <span class="nc">ShowName</span> <span class="kd">extends</span> <span class="n">VueComponentBase</span> <span class="p">{</span>
  <span class="n">ShowName</span><span class="p">(</span><span class="n">context</span><span class="p">)</span><span class="o">:</span> <span class="k">super</span><span class="p">(</span><span class="n">context</span><span class="p">);</span>

  <span class="nd">@prop</span>
  <span class="kt">String</span> <span class="n">name</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">template</span> <span class="na">vuedart</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Your name is: {{name}}<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">style</span> <span class="na">scoped</span><span class="p">&gt;</span>
<span class="nt">p</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="kc">purple</span><span class="p">;</span> <span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
</pre></div>

<p>The syntax for scoped styles closely resembles Vue's own single-file components.</p><div id="mixins"></div>
<h2>Mixins</h2>
<p>Mixins are easy to declare in VueDart. Take this example:</p>
<div class="highlight"><pre><span></span><span class="nd">@VueMixin</span><span class="p">()</span>
<span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">TodoMixin</span> <span class="p">{</span>
  <span class="nd">@method</span>
  <span class="kt">String</span> <span class="n">capitalize</span><span class="p">(</span><span class="kt">String</span> <span class="n">thing</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="n">thing</span><span class="p">.</span><span class="n">toUpperCase</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>

<p>There are three important things about this:</p><ul><li>
<p>The <code>@VueMixin()</code> annotation should go on <em>any</em> VueDart mixin, otherwise you'll get
  incredibly bizarre analyzer errors.</p></li><li>Mixins must not use other mixins!</li><li>Mixins must be <code>abstract</code>.</li></ul>
<p>Now you can use your mixin:</p>
<div class="highlight"><pre><span></span><span class="nd">@VueComponent</span><span class="p">(</span><span class="nl">name:</span> <span class="s1">'show-name'</span><span class="p">,</span> <span class="nl">template:</span> <span class="s1">'&lt;&lt;'</span><span class="p">,</span> <span class="nl">mixins:</span> <span class="kd">const</span> <span class="p">[</span><span class="n">TodoMixin</span><span class="p">])</span>
<span class="kd">class</span> <span class="nc">ShowName</span> <span class="kd">extends</span> <span class="n">VueComponentBase</span> <span class="kd">with</span> <span class="n">TodoMixin</span> <span class="p">{</span>
  <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>

<p>Note that the only difference between using a standard Dart mixin and a VueDart mixin is
the extra <code>mixins:</code> argument to <code>@VueComponent</code>.</p><div id="lifecycle"></div>
<h2>Lifecycle callbacks</h2>
<p>Lifecycle callbacks are dead simple in VueDart! For starters, the <code>created</code> lifecycle
callback is just your constructor. For example:</p>
<div class="highlight"><pre><span></span><span class="nd">@VueComponent</span><span class="p">(</span><span class="nl">name:</span> <span class="s1">'my-component'</span><span class="p">,</span> <span class="nl">template:</span> <span class="s1">'&lt;pHello!&lt;/p&gt;'</span><span class="p">)</span>
<span class="kd">class</span> <span class="nc">MyComponent</span> <span class="kd">extends</span> <span class="n">VueComponentBase</span> <span class="p">{</span>
  <span class="n">MyComponent</span><span class="p">(</span><span class="n">context</span><span class="p">)</span><span class="o">:</span> <span class="k">super</span><span class="p">(</span><span class="n">context</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// This is the VueDart equivalent of the 'created' lifecycle callback</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="nd">@VueApp</span><span class="p">(</span><span class="nl">el:</span> <span class="s1">'#app'</span><span class="p">)</span>
<span class="kd">class</span> <span class="nc">App</span> <span class="kd">extends</span> <span class="n">VueAppBase</span> <span class="p">{</span>
  <span class="kd">factory</span> <span class="n">App</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="n">VueAppBase</span><span class="p">.</span><span class="n">create</span><span class="p">((</span><span class="n">context</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="k">new</span> <span class="n">App</span><span class="p">.</span><span class="n">_</span><span class="p">(</span><span class="n">context</span><span class="p">));</span>
  <span class="n">App</span><span class="p">.</span><span class="n">_</span><span class="p">(</span><span class="n">context</span><span class="p">)</span><span class="o">:</span> <span class="k">super</span><span class="p">(</span><span class="n">context</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Same here.</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>The others are just method overrides:</p>
<div class="highlight"><pre><span></span><span class="nd">@VueComponent</span><span class="p">(</span><span class="nl">name:</span> <span class="s1">'my-component'</span><span class="p">,</span> <span class="nl">template:</span> <span class="s1">'&lt;pHello!&lt;/p&gt;'</span><span class="p">)</span>
<span class="kd">class</span> <span class="nc">MyComponent</span> <span class="kd">extends</span> <span class="n">VueComponentBase</span> <span class="p">{</span>
  <span class="n">MyComponent</span><span class="p">(</span><span class="n">context</span><span class="p">)</span><span class="o">:</span> <span class="k">super</span><span class="p">(</span><span class="n">context</span><span class="p">);</span>

  <span class="nd">@override</span>
  <span class="kt">void</span> <span class="n">mounted</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="n">print</span><span class="p">(</span><span class="s2">"mounted!"</span><span class="p">);</span>
  <span class="nd">@override</span>
  <span class="kt">void</span> <span class="n">destroyed</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="n">print</span><span class="p">(</span><span class="s2">"destroyed!"</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>

<p>and so forth for all the other lifecycle callbacks.</p><div id="refs"></div>
<h2>Accessing refs</h2>
<p>Take the following component:</p>
<div class="highlight"><pre><span></span><span class="nd">@VueComponent</span><span class="p">(</span><span class="nl">name:</span> <span class="s1">'my-component'</span><span class="p">,</span> <span class="nl">template:</span> <span class="s1">'&lt;div ref="text"&gt;Hello!&lt;/div&gt;'</span><span class="p">)</span>
<span class="kd">class</span> <span class="nc">MyComponent</span> <span class="kd">extends</span> <span class="n">VueComponentBase</span> <span class="p">{</span>
  <span class="n">MyComponent</span><span class="p">(</span><span class="n">context</span><span class="p">)</span><span class="o">:</span> <span class="k">super</span><span class="p">(</span><span class="n">context</span><span class="p">);</span>

  <span class="nd">@override</span>
  <span class="kt">void</span> <span class="n">mounted</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// How to access the div element?</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>For this, you can use the <code>@ref</code> annotation:</p>
<div class="highlight"><pre><span></span><span class="k">import</span> <span class="s1">'dart:html'</span><span class="p">;</span> <span class="c1">// to get DivElement</span>

<span class="nd">@VueComponent</span><span class="p">(</span><span class="nl">name:</span> <span class="s1">'my-component'</span><span class="p">,</span> <span class="nl">template:</span> <span class="s1">'&lt;div ref="text"&gt;Hello!&lt;/div&gt;'</span><span class="p">)</span>
<span class="kd">class</span> <span class="nc">MyComponent</span> <span class="kd">extends</span> <span class="n">VueComponentBase</span> <span class="p">{</span>
  <span class="n">MyComponent</span><span class="p">(</span><span class="n">context</span><span class="p">)</span><span class="o">:</span> <span class="k">super</span><span class="p">(</span><span class="n">context</span><span class="p">);</span>

  <span class="nd">@ref</span>
  <span class="n">DivElement</span> <span class="n">text</span><span class="p">;</span>

  <span class="nd">@override</span>
  <span class="kt">void</span> <span class="n">mounted</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="n">print</span><span class="p">(</span><span class="n">text</span><span class="p">.</span><span class="n">text</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>

<p>Piece of cake, right? It's like declaring a normal attribute.</p>
<p>Accessing component refs is just as simple:</p>
<div class="highlight"><pre><span></span><span class="nd">@VueComponent</span><span class="p">(</span><span class="s1">'first-component'</span><span class="p">,</span> <span class="nl">template:</span> <span class="s1">'&lt;div&gt;Hello!&lt;/div&gt;'</span><span class="p">)</span>
<span class="kd">class</span> <span class="nc">FirstComponent</span> <span class="kd">extends</span> <span class="n">VueComponentBase</span> <span class="p">{</span>
  <span class="n">FirstComponent</span><span class="p">(</span><span class="n">context</span><span class="p">)</span><span class="o">:</span> <span class="k">super</span><span class="p">(</span><span class="n">context</span><span class="p">);</span>

  <span class="nd">@computed</span>
  <span class="kt">String</span> <span class="kd">get</span> <span class="n">stuff</span> <span class="o">=&gt;</span> <span class="s1">'Hello!'</span><span class="p">;</span>
<span class="p">}</span>

<span class="nd">@VueComponent</span><span class="p">(</span><span class="s1">'second-component'</span><span class="p">,</span>
              <span class="nl">template:</span> <span class="s1">'&lt;first-component ref="first"&gt;&lt;/first-component&gt;'</span><span class="p">)</span>
<span class="kd">class</span> <span class="nc">SecondComponent</span> <span class="kd">extends</span> <span class="n">VueComponentBase</span> <span class="p">{</span>
  <span class="n">SecondComponent</span><span class="p">(</span><span class="n">context</span><span class="p">)</span><span class="o">:</span> <span class="k">super</span><span class="p">(</span><span class="n">context</span><span class="p">);</span>

  <span class="nd">@ref</span>
  <span class="n">FirstComponent</span> <span class="n">first</span><span class="p">;</span>

  <span class="nd">@override</span>
  <span class="kt">void</span> <span class="n">mounted</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="n">print</span><span class="p">(</span><span class="n">first</span><span class="p">.</span><span class="n">stuff</span><span class="p">);</span> <span class="c1">// Hello!</span>
<span class="p">}</span>
</pre></div>

<p>If you need to get a ref by name instead of declaring it ahead-of-type, use the <code>$ref</code>
function:</p>
<div class="highlight"><pre><span></span><span class="kt">void</span> <span class="n">mounted</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">print</span><span class="p">(</span><span class="n">$ref</span><span class="p">(</span><span class="s1">'first'</span><span class="p">)</span> <span class="o">as</span> <span class="n">FirstComponent</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>

      </div>
    </md-layout>
  </div>

</body></html>